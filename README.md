# WebSeg

高效智能的交互式分割标注Web后台服务, 只需要发送图片地址及点击的坐标，即可返回预测轮廓框的位置，大大减少人工操作量。

![WebSegDemo](https://user-images.githubusercontent.com/84259897/184518254-efce2921-9769-474a-8512-f70dc349bb3f.gif)


> 如果仅仅是想少量使用或者体验功能，可以使用以下服务。
1. 加载图片，image_url是需要交互式分割的图片网址。

```bash
curl -X POST \
  http://120.197.126.62:5000/load_image \
  -F image_url=https://profile-avatar.csdnimg.cn/3e52be6191864df299092b77fe863158_vitionxp.jpg
```
返回值如下，其中key表示图片的id。
```
{"ret": 0, "msg": "ok", "key": "tREjRZRJuq"}
````

2. 增加点击点，click_x，click_y表示点击的x,y点坐标，flag=1表示选中该点，0表示不选中该区域。key表示图片id。
```bash
curl -X POST \
  http://120.197.126.62:5000/add_click \
  -F click_x=2 \
  -F click_y=10 \
  -F flag=1 \
  -F key=xtvxSEwPVB
```
返回值如下，表示轮廓坐标。
```bash
{"ret": 0, "msg": "ok", "result": [[0, 0], [0, 149], [68, 147], [69, 148], [87, 147], [80, 147], [78, 145], [71, 144], [62, 145], [44, 134], [41, 122], [42, 117], [41, 113], [34, 110], [25, 100], [20, 86], [18, 84], [18, 68], [24, 54], [24, 51], [33, 32], [43, 23], [43, 19], [49, 12], [61, 12], [64, 9], [74, 6], [81, 6], [92, 12], [101, 13], [113, 11], [122, 19], [120, 28], [120, 32], [125, 37], [125, 58], [127, 71], [125, 89], [114, 107], [107, 113], [107, 124], [109, 126], [115, 125], [115, 121], [116, 119], [118, 118], [120, 120], [123, 121], [131, 129], [130, 134], [132, 136], [134, 133], [137, 136], [144, 139], [147, 146], [149, 4], [148, 3], [148, 0]]}
```

3. 清除存储图片
```bash
curl -X GET  'http://120.197.126.62:5000/clear?key=xtvxSEwPVB' 
```

> 如果想自己部署，需要自己构建镜像，然后启动该镜像即可。

1. 构建镜像
```bash
sh bash_tool/build.sh
```

2. 启动镜像
```bash
sh bash_tool/run.sh
```